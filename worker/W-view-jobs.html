<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hirewale · View Jobs</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root{
      --brand-600:#0ea5e9;
      --brand-700:#0284c7;
      --brand-success:#16a34a;
      --brand-warning:#f59e0b;
      --brand-danger:#dc2626;
      --ink:#0f172a;
      --card-bg:#ffffff;
      --glass-bg: rgba(255, 255, 255, 0.85);
      --glass-border: rgba(0, 0, 0, 0.08);
      --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      --transition-speed: 0.3s;
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto;}
    body{
      min-height:100vh;
      background:
        radial-gradient(1200px 600px at 10% 10%, #e0f2fe 0%, transparent 60%),
        radial-gradient(1000px 500px at 90% 20%, #bae6fd 0%, transparent 60%),
        linear-gradient(180deg, #f0f9ff 0%, #ffffff 40%, #f8fafc 100%);
      color:var(--ink);
      display:flex;
      justify-content:center;
      padding:32px 0;
    }
    .dashboard{
      width:min(100%,1200px);
      display:grid;
      gap:24px;
      padding:0 16px;
      grid-template-areas: 
        "header"
        "filters"
        "jobs";
    }
    
    .header {
      grid-area: header;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .card{
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(12px);
      border-radius:20px;
      padding:24px;
      box-shadow: var(--glass-shadow);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
    }
    
    h1 {
      font-size: 28px;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .filters {
      grid-area: filters;
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      align-items: center;
    }
    
    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .filter-group label {
      font-size: 14px;
      font-weight: 600;
      color: #64748b;
    }
    
    .filter-select, .search-input {
      padding: 12px 16px;
      border-radius: 12px;
      border: 1px solid #e2e8f0;
      background: white;
      font-size: 14px;
      min-width: 180px;
      transition: all 0.3s ease;
    }
    
    .filter-select:focus, .search-input:focus {
      outline: none;
      border-color: var(--brand-600);
      box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.2);
    }
    
    .search-input {
      padding-left: 40px;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%2364748b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'%3E%3C/circle%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'%3E%3C/line%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: 16px center;
    }
    
    .jobs-container {
      grid-area: jobs;
      display: grid;
      gap: 20px;
    }
    
    .job-card{
      background: white;
      border: 1px solid #e2e8f0;
      border-radius:16px;
      padding:24px;
      box-shadow:0 4px 12px rgba(0,0,0,0.05);
      display: flex;
      flex-direction: column;
      gap: 16px;
      transition: all 0.3s ease;
      position: relative;
    }
    
    .job-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
    }
    
    .job-card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }
    
    .job-title{
      font-weight:700;
      font-size:18px;
      color: var(--ink);
      margin: 0;
    }
    
    .job-price {
      font-weight: 700;
      font-size: 20px;
      color: var(--brand-success);
    }
    
    .job-details{
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 12px;
      font-size:14px;
      color:#64748b;
    }
    
    .job-detail {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .job-detail i {
      width: 20px;
      color: var(--brand-600);
    }
    
    .job-description {
      color: #334155;
      line-height: 1.5;
      margin: 8px 0;
    }
    
    .job-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    
    .job-tag {
      background: #f1f5f9;
      color: #475569;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
    }
    
    .job-card-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
    }
    
    .job-posted {
      font-size: 13px;
      color: #94a3b8;
    }
    
    .actions{
      display:flex;
      gap:12px;
    }
    
    .btn{
      padding:12px 20px;
      border:none;
      border-radius:12px;
      cursor:pointer;
      font-weight:600;
      transition: all 0.3s ease;
      color:white;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .btn:hover{
      transform:translateY(-2px);
      box-shadow:0 6px 16px rgba(0,0,0,0.15);
    }
    
    .accept{
      background:var(--brand-success);
    }
    
    .accept:hover{
      background:#15803d;
      box-shadow:0 6px 16px rgba(22, 163, 74, 0.4);
    }
    
    .reject{
      background:var(--brand-danger);
    }
    
    .reject:hover{
      background:#b91c1c;
      box-shadow:0 6px 16px rgba(220, 38, 38, 0.4);
    }
    
    .back-btn{
      background:var(--brand-600);
      padding: 12px 24px;
    }
    
    .back-btn:hover{
      background:var(--brand-700);
      box-shadow:0 6px 16px rgba(14, 165, 233, 0.4);
    }
    
    .no-jobs {
      text-align: center;
      padding: 40px;
      color: #64748b;
    }
    
    .no-jobs i {
      font-size: 48px;
      margin-bottom: 16px;
      color: #cbd5e1;
    }
    
    .no-jobs p {
      margin: 0;
      font-size: 18px;
    }
    
    /* Modal */
    .modal-overlay{
      display:none;
      position:fixed;
      top:0;
      left:0;
      width:100%;
      height:100%;
      background:rgba(0,0,0,0.5);
      justify-content:center;
      align-items:center;
      z-index:1000;
      backdrop-filter: blur(4px);
    }
    
    .modal-content{
      background:var(--glass-bg);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(16px);
      padding:32px;
      border-radius:20px;
      max-width:500px;
      text-align:center;
      animation:bounceIn 0.45s ease;
      box-shadow: var(--glass-shadow);
    }
    
    @keyframes bounceIn {
      0% { opacity: 0; transform: scale(0.8); }
      60% { opacity: 1; transform: scale(1.05); }
      80% { transform: scale(0.95); }
      100% { transform: scale(1); }
    }
    
    .modal-header {
      margin-bottom: 20px;
    }
    
    .modal-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }
    
    .modal-icon.accept {
      color: var(--brand-success);
    }
    
    .modal-icon.reject {
      color: var(--brand-danger);
    }
    
    .modal-title {
      font-size: 24px;
      margin: 0 0 8px 0;
    }
    
    .modal-message {
      color: #64748b;
      margin-bottom: 24px;
      line-height: 1.5;
    }
    
    .modal-job-details {
      background: #f8fafc;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 24px;
      text-align: left;
    }
    
    .modal-job-detail {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
    }
    
    .modal-job-detail:last-child {
      margin-bottom: 0;
    }
    
    .modal-job-detail .label {
      color: #64748b;
    }
    
    .modal-job-detail .value {
      font-weight: 600;
    }
    
    .modal-actions{
      display:flex;
      justify-content:center;
      gap:12px;
    }
    
    .modal-btn{
      padding:12px 24px;
      border:none;
      border-radius:12px;
      cursor:pointer;
      font-weight:600;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .modal-btn.confirm{
      background:var(--brand-success);
      color:white;
    }
    
    .modal-btn.confirm:hover {
      background:#15803d;
      transform: translateY(-2px);
      box-shadow:0 6px 16px rgba(22, 163, 74, 0.4);
    }
    
    .modal-btn.cancel{
      background:var(--brand-600);
      color:white;
    }
    
    .modal-btn.cancel:hover {
      background:var(--brand-700);
      transform: translateY(-2px);
      box-shadow:0 6px 16px rgba(14, 165, 233, 0.4);
    }
    
    .modal-btn.reject{
      background:var(--brand-danger);
      color:white;
    }
    
    .modal-btn.reject:hover {
      background:#b91c1c;
      transform: translateY(-2px);
      box-shadow:0 6px 16px rgba(220, 38, 38, 0.4);
    }
    
    .pagination {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 24px;
    }
    
    .pagination-btn {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 12px;
      border: 1px solid #e2e8f0;
      background: white;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .pagination-btn:hover {
      border-color: var(--brand-600);
      color: var(--brand-600);
    }
    
    .pagination-btn.active {
      background: var(--brand-600);
      color: white;
      border-color: var(--brand-600);
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .header {
        flex-direction: column;
        align-items: flex-start;
        gap: 16px;
      }
      
      .filters {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .filter-group {
        width: 100%;
      }
      
      .filter-select, .search-input {
        width: 100%;
      }
      
      .job-card-header {
        flex-direction: column;
        gap: 12px;
      }
      
      .job-card-footer {
        flex-direction: column;
        gap: 16px;
        align-items: flex-start;
      }
      
      .actions {
        width: 100%;
        justify-content: space-between;
      }
      
      .btn {
        flex: 1;
      }
    }
  </style>
</head>
<body>
  <div class="dashboard">
    <div class="header">
      <h1><i class="fas fa-briefcase"></i> Available Jobs</h1>
      <button class="btn back-btn" onclick="window.location.href='W-dashboard.html'">
        <i class="fas fa-arrow-left"></i> Back to Dashboard
      </button>
    </div>

    <div class="card filters">
      <div class="filter-group">
        <label for="categoryFilter">Category</label>
        <select id="categoryFilter" class="filter-select">
          <option value="all">All Categories</option>
          <option value="electrical">Electrical</option>
          <option value="plumbing">Plumbing</option>
          <option value="carpentry">Carpentry</option>
          <option value="cleaning">Cleaning</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label for="locationFilter">Location</label>
        <select id="locationFilter" class="filter-select">
          <option value="all">All Locations</option>
          <option value="mangalore">Mangalore</option>
          <option value="udupi">Udupi</option>
          <option value="banglore">Bangalore</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label for="sortBy">Sort By</label>
        <select id="sortBy" class="filter-select">
          <option value="newest">Newest First</option>
          <option value="oldest">Oldest First</option>
          <option value="price-high">Price: High to Low</option>
          <option value="price-low">Price: Low to High</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label for="searchInput">Search</label>
        <input type="text" id="searchInput" class="search-input" placeholder="Search jobs...">
      </div>
    </div>

    <div class="jobs-container" id="jobsContainer">
      <!-- Job cards will be populated by JavaScript -->
    </div>

    <div class="pagination" id="pagination">
      <!-- Pagination will be populated by JavaScript -->
    </div>
  </div>

  <!-- Job Action Modal -->
  <div id="actionModal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-icon" id="modalIcon">
          <i class="fas fa-question-circle"></i>
        </div>
        <h3 class="modal-title" id="modalTitle">Confirm Action</h3>
        <p class="modal-message" id="modalMessage">Are you sure you want to perform this action?</p>
      </div>
      
      <div class="modal-job-details" id="modalJobDetails">
        <!-- Job details will be populated by JavaScript -->
      </div>
      
      <div class="modal-actions">
        <button id="confirmAction" class="modal-btn confirm">
          <i class="fas fa-check"></i> Confirm
        </button>
        <button id="cancelAction" class="modal-btn cancel">
          <i class="fas fa-times"></i> Cancel
        </button>
      </div>
    </div>
  </div>

  <!-- Job Detail Modal -->
  <div id="detailModal" class="modal-overlay">
    <div class="modal-content" style="max-width: 600px; text-align: left;">
      <div class="modal-header" style="text-align: center;">
        <h3 class="modal-title" id="detailTitle">Job Details</h3>
      </div>
      
      <div id="detailContent">
        <!-- Job details will be populated by JavaScript -->
      </div>
      
      <div class="modal-actions">
        <button id="closeDetail" class="modal-btn cancel">
          <i class="fas fa-times"></i> Close
        </button>
        <button id="acceptFromDetail" class="modal-btn confirm">
          <i class="fas fa-check"></i> Accept Job
        </button>
      </div>
    </div>
  </div>

  <script>
    // Enhanced View Jobs functionality
    document.addEventListener('DOMContentLoaded', function() {
      // Load jobs from sessionStorage or create defaults
      let jobs = JSON.parse(sessionStorage.getItem("jobs")) || [
        {
          id: 1, 
          title: "Fix kitchen wiring", 
          location: "Mangalore", 
          pay: 500, 
          status: "pending",
          category: "electrical",
          description: "Need to fix kitchen wiring that's causing frequent short circuits. All materials will be provided.",
          client: "Rahul Sharma",
          posted: "2023-06-10T14:30:00",
          duration: "2-3 hours",
          urgency: "high",
          tags: ["wiring", "kitchen", "electrical"]
        },
        {
          id: 2, 
          title: "Install ceiling fan", 
          location: "Udupi", 
          pay: 400, 
          status: "pending",
          category: "electrical",
          description: "Need to install a new ceiling fan in living room. Existing wiring is in place.",
          client: "Priya Patel",
          posted: "2023-06-12T09:15:00",
          duration: "1-2 hours",
          urgency: "medium",
          tags: ["fan installation", "ceiling", "electrical"]
        },
        {
          id: 3, 
          title: "Repair water heater", 
          location: "Mangalore", 
          pay: 600, 
          status: "pending",
          category: "plumbing",
          description: "Water heater not heating properly. Needs diagnosis and repair.",
          client: "Vikram Malhotra",
          posted: "2023-06-13T16:45:00",
          duration: "2-3 hours",
          urgency: "high",
          tags: ["water heater", "repair", "plumbing"]
        },
        {
          id: 4, 
          title: "Fix leaking pipe", 
          location: "Bangalore", 
          pay: 350, 
          status: "pending",
          category: "plumbing",
          description: "Kitchen sink pipe is leaking and needs to be fixed or replaced.",
          client: "Ananya Reddy",
          posted: "2023-06-14T11:20:00",
          duration: "1-2 hours",
          urgency: "medium",
          tags: ["pipe repair", "leak", "plumbing"]
        },
        {
          id: 5, 
          title: "Assemble furniture", 
          location: "Mangalore", 
          pay: 450, 
          status: "pending",
          category: "carpentry",
          description: "Need help assembling IKEA furniture (bed frame and wardrobe).",
          client: "Nitin Desai",
          posted: "2023-06-15T13:10:00",
          duration: "3-4 hours",
          urgency: "low",
          tags: ["furniture assembly", "carpentry"]
        }
      ];
      sessionStorage.setItem("jobs", JSON.stringify(jobs));
      
      // DOM Elements
      const jobsContainer = document.getElementById("jobsContainer");
      const actionModal = document.getElementById("actionModal");
      const detailModal = document.getElementById("detailModal");
      const categoryFilter = document.getElementById("categoryFilter");
      const locationFilter = document.getElementById("locationFilter");
      const sortBy = document.getElementById("sortBy");
      const searchInput = document.getElementById("searchInput");
      const paginationContainer = document.getElementById("pagination");
      
      // State variables
      let selectedJob = null;
      let selectedAction = null;
      let currentPage = 1;
      const jobsPerPage = 4;
      let filteredJobs = [];
      
      // Initialize the page
      function init() {
        filteredJobs = [...jobs.filter(job => job.status === "pending")];
        applyFilters();
        setupEventListeners();
      }
      
      // Set up event listeners
      function setupEventListeners() {
        // Filter event listeners
        categoryFilter.addEventListener('change', applyFilters);
        locationFilter.addEventListener('change', applyFilters);
        sortBy.addEventListener('change', applyFilters);
        searchInput.addEventListener('input', applyFilters);
        
        // Modal event listeners
        document.getElementById('cancelAction').addEventListener('click', closeModal);
        document.getElementById('confirmAction').addEventListener('click', confirmAction);
        document.getElementById('closeDetail').addEventListener('click', closeDetailModal);
        document.getElementById('acceptFromDetail').addEventListener('click', acceptFromDetail);
      }
      
      // Apply all filters and render jobs
      function applyFilters() {
        const category = categoryFilter.value;
        const location = locationFilter.value;
        const sort = sortBy.value;
        const searchTerm = searchInput.value.toLowerCase();
        
        // Filter jobs
        filteredJobs = jobs.filter(job => {
          if (job.status !== "pending") return false;
          if (category !== "all" && job.category !== category) return false;
          if (location !== "all" && job.location.toLowerCase() !== location) return false;
          if (searchTerm && !(
            job.title.toLowerCase().includes(searchTerm) ||
            job.description.toLowerCase().includes(searchTerm) ||
            job.tags.some(tag => tag.toLowerCase().includes(searchTerm))
          )) return false;
          
          return true;
        });
        
        // Sort jobs
        switch(sort) {
          case 'newest':
            filteredJobs.sort((a, b) => new Date(b.posted) - new Date(a.posted));
            break;
          case 'oldest':
            filteredJobs.sort((a, b) => new Date(a.posted) - new Date(b.posted));
            break;
          case 'price-high':
            filteredJobs.sort((a, b) => b.pay - a.pay);
            break;
          case 'price-low':
            filteredJobs.sort((a, b) => a.pay - b.pay);
            break;
        }
        
        // Reset to first page
        currentPage = 1;
        renderJobs();
        renderPagination();
      }
      
      // Render jobs for current page
      function renderJobs() {
        jobsContainer.innerHTML = '';
        
        if (filteredJobs.length === 0) {
          jobsContainer.innerHTML = `
            <div class="no-jobs">
              <i class="fas fa-search"></i>
              <p>No jobs found matching your criteria</p>
            </div>
          `;
          paginationContainer.innerHTML = '';
          return;
        }
        
        // Calculate pagination
        const startIndex = (currentPage - 1) * jobsPerPage;
        const endIndex = Math.min(startIndex + jobsPerPage, filteredJobs.length);
        const jobsToRender = filteredJobs.slice(startIndex, endIndex);
        
        jobsToRender.forEach(job => {
          const jobCard = document.createElement('div');
          jobCard.className = 'job-card';
          
          const postedDate = new Date(job.posted);
          const timeAgo = getTimeAgo(postedDate);
          
          jobCard.innerHTML = `
            <div class="job-card-header">
              <h3 class="job-title">${job.title}</h3>
              <div class="job-price">₹${job.pay}</div>
            </div>
            
            <div class="job-details">
              <div class="job-detail">
                <i class="fas fa-map-marker-alt"></i>
                <span>${job.location}</span>
              </div>
              <div class="job-detail">
                <i class="fas fa-clock"></i>
                <span>${job.duration}</span>
              </div>
              <div class="job-detail">
                <i class="fas fa-bolt"></i>
                <span>${job.urgency.charAt(0).toUpperCase() + job.urgency.slice(1)} urgency</span>
              </div>
              <div class="job-detail">
                <i class="fas fa-user"></i>
                <span>${job.client}</span>
              </div>
            </div>
            
            <p class="job-description">${job.description}</p>
            
            <div class="job-tags">
              ${job.tags.map(tag => `<span class="job-tag">${tag}</span>`).join('')}
            </div>
            
            <div class="job-card-footer">
              <div class="job-posted">Posted ${timeAgo}</div>
              <div class="actions">
                <button class="btn reject" onclick="openModal(${job.id}, 'reject')">
                  <i class="fas fa-times"></i> Reject
                </button>
                <button class="btn accept" onclick="openModal(${job.id}, 'accept')">
                  <i class="fas fa-check"></i> Accept
                </button>
                <button class="btn" style="background: var(--brand-600);" onclick="viewJobDetails(${job.id})">
                  <i class="fas fa-eye"></i> Details
                </button>
              </div>
            </div>
          `;
          
          jobsContainer.appendChild(jobCard);
        });
      }
      
      // Render pagination controls
      function renderPagination() {
        const totalPages = Math.ceil(filteredJobs.length / jobsPerPage);
        
        if (totalPages <= 1) {
          paginationContainer.innerHTML = '';
          return;
        }
        
        let paginationHTML = '';
        
        // Previous button
        if (currentPage > 1) {
          paginationHTML += `<button class="pagination-btn" onclick="changePage(${currentPage - 1})"><i class="fas fa-chevron-left"></i></button>`;
        }
        
        // Page numbers
        for (let i = 1; i <= totalPages; i++) {
          if (i === currentPage) {
            paginationHTML += `<button class="pagination-btn active">${i}</button>`;
          } else {
            paginationHTML += `<button class="pagination-btn" onclick="changePage(${i})">${i}</button>`;
          }
        }
        
        // Next button
        if (currentPage < totalPages) {
          paginationHTML += `<button class="pagination-btn" onclick="changePage(${currentPage + 1})"><i class="fas fa-chevron-right"></i></button>`;
        }
        
        paginationContainer.innerHTML = paginationHTML;
      }
      
      // Change page
      window.changePage = function(page) {
        currentPage = page;
        renderJobs();
        renderPagination();
        window.scrollTo({ top: 0, behavior: 'smooth' });
      };
      
      // Open action modal
      window.openModal = function(jobId, action) {
        selectedJob = jobs.find(j => j.id === jobId);
        selectedAction = action;
        
        const modalIcon = document.getElementById('modalIcon');
        const modalTitle = document.getElementById('modalTitle');
        const modalMessage = document.getElementById('modalMessage');
        const modalJobDetails = document.getElementById('modalJobDetails');
        const confirmBtn = document.getElementById('confirmAction');
        
        if (action === 'accept') {
          modalIcon.innerHTML = '<i class="fas fa-check-circle"></i>';
          modalIcon.className = 'modal-icon accept';
          modalTitle.textContent = 'Accept Job';
          modalMessage.textContent = `Are you sure you want to accept this job?`;
          confirmBtn.className = 'modal-btn confirm';
          confirmBtn.innerHTML = '<i class="fas fa-check"></i> Accept Job';
        } else {
          modalIcon.innerHTML = '<i class="fas fa-times-circle"></i>';
          modalIcon.className = 'modal-icon reject';
          modalTitle.textContent = 'Reject Job';
          modalMessage.textContent = `Are you sure you want to reject this job?`;
          confirmBtn.className = 'modal-btn reject';
          confirmBtn.innerHTML = '<i class="fas fa-times"></i> Reject Job';
        }
        
        modalJobDetails.innerHTML = `
          <div class="modal-job-detail">
            <span class="label">Job:</span>
            <span class="value">${selectedJob.title}</span>
          </div>
          <div class="modal-job-detail">
            <span class="label">Location:</span>
            <span class="value">${selectedJob.location}</span>
          </div>
          <div class="modal-job-detail">
            <span class="label">Pay:</span>
            <span class="value">₹${selectedJob.pay}</span>
          </div>
        `;
        
        actionModal.style.display = 'flex';
      };
      
      // Close modal
      function closeModal() {
        actionModal.style.display = 'none';
        selectedJob = null;
        selectedAction = null;
      }
      
      // Confirm action
      function confirmAction() {
        if (selectedJob && selectedAction) {
          if (selectedAction === 'accept') {
            selectedJob.status = 'accepted';
            addNotification(`✅ Accepted job: ${selectedJob.title}`, 'success');
          } else {
            selectedJob.status = 'rejected';
            addNotification(`❌ Rejected job: ${selectedJob.title}`, 'danger');
          }
          
          sessionStorage.setItem('jobs', JSON.stringify(jobs));
          applyFilters(); // Refresh the job list
        }
        
        closeModal();
      }
      
      // View job details
      window.viewJobDetails = function(jobId) {
        const job = jobs.find(j => j.id === jobId);
        const detailTitle = document.getElementById('detailTitle');
        const detailContent = document.getElementById('detailContent');
        
        detailTitle.textContent = job.title;
        
        const postedDate = new Date(job.posted);
        const formattedDate = postedDate.toLocaleDateString('en-IN', {
          weekday: 'long',
          year: 'numeric',
          month: 'long',
          day: 'numeric'
        });
        
        detailContent.innerHTML = `
          <div class="modal-job-details">
            <div class="modal-job-detail">
              <span class="label">Client:</span>
              <span class="value">${job.client}</span>
            </div>
            <div class="modal-job-detail">
              <span class="label">Location:</span>
              <span class="value">${job.location}</span>
            </div>
            <div class="modal-job-detail">
              <span class="label">Pay:</span>
              <span class="value">₹${job.pay}</span>
            </div>
            <div class="modal-job-detail">
              <span class="label">Duration:</span>
              <span class="value">${job.duration}</span>
            </div>
            <div class="modal-job-detail">
              <span class="label">Urgency:</span>
              <span class="value">${job.urgency.charAt(0).toUpperCase() + job.urgency.slice(1)}</span>
            </div>
            <div class="modal-job-detail">
              <span class="label">Posted:</span>
              <span class="value">${formattedDate}</span>
            </div>
          </div>
          
          <h4>Job Description</h4>
          <p>${job.description}</p>
          
          <h4>Required Skills</h4>
          <div class="job-tags">
            ${job.tags.map(tag => `<span class="job-tag">${tag}</span>`).join('')}
          </div>
        `;
        
        // Set up the accept button to work with this job
        const acceptBtn = document.getElementById('acceptFromDetail');
        acceptBtn.onclick = function() {
          openModal(jobId, 'accept');
          closeDetailModal();
        };
        
        detailModal.style.display = 'flex';
      };
      
      // Close detail modal
      function closeDetailModal() {
        detailModal.style.display = 'none';
      }
      
      // Accept job from detail modal
      function acceptFromDetail() {
        if (selectedJob) {
          openModal(selectedJob.id, 'accept');
          closeDetailModal();
        }
      }
      
      // Get time ago string
      function getTimeAgo(date) {
        const now = new Date();
        const diffMs = now - date;
        const diffMins = Math.floor(diffMs / 60000);
        const diffHours = Math.floor(diffMs / 3600000);
        const diffDays = Math.floor(diffMs / 86400000);
        
        if (diffMins < 1) return 'just now';
        if (diffMins < 60) return `${diffMins} minutes ago`;
        if (diffHours < 24) return `${diffHours} hours ago`;
        if (diffDays === 1) return 'yesterday';
        return `${diffDays} days ago`;
      }
      
      // Notifications persistence
      function addNotification(message, type = 'info') {
        const saved = JSON.parse(sessionStorage.getItem('notifications')) || [];
        saved.unshift({
          message,
          type,
          time: Date.now()
        });
        sessionStorage.setItem('notifications', JSON.stringify(saved));
      }
      
      // Initialize the page
      init();
    });
  </script>
</body>
</html>